{"version":3,"sources":["webpack://RDFeasy/webpack/universalModuleDefinition","webpack://RDFeasy/webpack/bootstrap","webpack://RDFeasy/./src/rdflib-easy.js","webpack://RDFeasy/./src/index.js","webpack://RDFeasy/(webpack)/buildin/harmony-module.js","webpack://RDFeasy/external {\"commonjs\":\"rdflib\",\"commonjs2\":\"rdflib\",\"amd\":\"rdflib\",\"root\":\"$rdf\"}"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__3__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","$rdf","constructor","auth","this","_prefixStr","_getPrefixes","_auth","[object Object]","sources","query","source","store","graph","fetcher","fetch","load","dataUrl","sparqlStr","_prepSparql","Array","isArray","_multiQuery","_runQuery","sparql","outputFormat","_load","results","_execute","match","length","keys","self","Promise","async","resolve","reject","preparedQuery","SPARQLToQuery","wanted","vars","resultAry","row","_rowHandler","push","found","got","replace","w","label","url","turtle","rdfType","method","body","headers","Content-Type","err","aliases","acl","arg","cal","contact","dc","dct","doap","foaf","http","httph","icalTZ","ldp","link","linkr","log","media","meeting","mo","owl","pad","patch","qu","trip","rdf","rdfs","rss","sched","schema","sioc","solid","space","stat","tab","tabont","ui","vcard","wf","xsd","prefixStr","a","__webpack_exports__","_rdflib_easy_js__WEBPACK_IMPORTED_MODULE_0__","_rdflib_easy_js__WEBPACK_IMPORTED_MODULE_0___default","RDFeasy","originalModule","webpackPolyfill","children"],"mappings":"CAAA,SAAAA,EAAAC,GACA,iBAAAC,SAAA,iBAAAC,OACAA,OAAAD,QAAAD,EAAAG,QAAA,WACA,mBAAAC,eAAAC,IACAD,OAAA,WAAAJ,GACA,iBAAAC,QACAA,QAAA,QAAAD,EAAAG,QAAA,WAEAJ,EAAA,QAAAC,EAAAD,EAAA,MARA,CASCO,OAAA,SAAAC,GACD,mBCTA,IAAAC,EAAA,GAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAT,QAGA,IAAAC,EAAAM,EAAAE,GAAA,CACAC,EAAAD,EACAE,GAAA,EACAX,QAAA,IAUA,OANAY,EAAAH,GAAAI,KAAAZ,EAAAD,QAAAC,IAAAD,QAAAQ,GAGAP,EAAAU,GAAA,EAGAV,EAAAD,QA0DA,OArDAQ,EAAAM,EAAAF,EAGAJ,EAAAO,EAAAR,EAGAC,EAAAQ,EAAA,SAAAhB,EAAAiB,EAAAC,GACAV,EAAAW,EAAAnB,EAAAiB,IACAG,OAAAC,eAAArB,EAAAiB,EAAA,CAA0CK,YAAA,EAAAC,IAAAL,KAK1CV,EAAAgB,EAAA,SAAAxB,GACA,oBAAAyB,eAAAC,aACAN,OAAAC,eAAArB,EAAAyB,OAAAC,YAAA,CAAwDC,MAAA,WAExDP,OAAAC,eAAArB,EAAA,cAAiD2B,OAAA,KAQjDnB,EAAAoB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAAnB,EAAAmB,IACA,EAAAE,EAAA,OAAAF,EACA,KAAAE,GAAA,iBAAAF,QAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFAxB,EAAAgB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,UACzC,EAAAE,GAAA,iBAAAF,EAAA,QAAAM,KAAAN,EAAAnB,EAAAQ,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAvB,EAAA2B,EAAA,SAAAlC,GACA,IAAAiB,EAAAjB,KAAA6B,WACA,WAA2B,OAAA7B,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAO,EAAAQ,EAAAE,EAAA,IAAAA,GACAA,GAIAV,EAAAW,EAAA,SAAAiB,EAAAC,GAAsD,OAAAjB,OAAAkB,UAAAC,eAAA1B,KAAAuB,EAAAC,IAGtD7B,EAAAgC,EAAA,GAIAhC,IAAAiC,EAAA,qBClFmB,oBAATpC,SAAsBqC,KAAOxC,EAAQ,IAiK/CD,EAAOD,QA/JP,MAEE2C,YAAYC,GACVC,KAAKC,WAAaD,KAAKE,eACvBF,KAAKG,MAAQJ,EAGfK,kBAAkBC,EAAQC,GAGxB,IAAI,IAAIC,KAFRP,KAAKQ,MAAQX,KAAKY,QAClBT,KAAKU,QAAUb,KAAKa,QAAQV,KAAKQ,MAAM,CAACG,MAAMX,KAAKG,MAAMQ,QACvCN,SACVL,KAAKU,QAAQE,KAAKL,GAE1B,aAAaP,KAAKM,MAAM,KAAKA,GAG/BF,YAAYS,EAAQC,GAElB,OADAA,EAAYd,KAAKe,YAAYF,EAAQC,GAClCE,MAAMC,QAAQJ,SACFb,KAAKkB,YAAYL,EAAQC,SAE3Bd,KAAKmB,UAAWN,EAASC,EAAW,SAEnDV,YAAYG,EAAOa,GAEjB,OADAA,EAASpB,KAAKe,YAAYR,EAAOa,SACpBpB,KAAKmB,UAAWZ,EAAQa,EAAQ,SAG/ChB,gBAAgBS,EAAQC,EAAUO,GAC7BR,SAAeb,KAAKsB,MAAMT,GAC7B,IAAIU,QAAgBvB,KAAKwB,SAASV,GAClC,GAAGO,EAAaI,MAAM,UAAY,OAAOF,EACpC,GAAGF,EAAaI,MAAM,UAAW,CACnC,IAAIF,GAAWA,EAAQG,OAAS,EAAG,MAAO,GAC1C,IAAItC,EAAQb,OAAOoD,KAAKJ,EAAQ,IAAI,GACpC,OAAQA,EAAQ,GAAGnC,IAIxBgB,eAAegB,GACb,IAAIQ,EAAO5B,KACX,OAAO,IAAI6B,QAAQC,MAAMC,EAASC,KAClC,IAAIC,EAAgBpC,KAAKqC,cAAcd,GAAO,EAAMQ,EAAKpB,OACrD2B,EAASF,EAAcG,KACvBC,EAAY,GAChBT,EAAKpB,MAAMF,MAAM2B,EAAeH,eACT,IAAXP,GAA0BS,EAAO,eAC3C,IAAIM,QAAYtC,KAAKuC,YAAYJ,EAAOZ,GACrCe,GAAKD,EAAUG,KAAKF,IACtB,GAAK,WAAW,OAAOP,EAAQM,OAIpCjC,kBAAkB+B,EAAOZ,GACvB,IAAIe,EAAM,GACV,IAAI,IAAI3D,KAAK4C,EAAQ,CACnB,IAAIkB,GAAQ,EACRC,EAAM/D,EAAEgE,QAAQ,MAAM,IAC1B,GAAGR,EAAOT,OAAO,CACf,IAAI,IAAIkB,KAAKT,EACRO,IAAMP,EAAOS,GAAGC,QAAQJ,GAAM,GAEnC,IAAIA,EAAO,SAEbH,EAAII,GAAKnB,EAAQ5C,GAAGG,MAEtB,OAAOwD,EAGTvB,YAAYR,EAAOa,GAIjB,OAHIA,IAAQA,EAAS,iDACrBA,EAAOA,EAAOuB,QAAQ,OAAO,IAAIpC,EAAO,KACxCa,eAAsBb,QAAeP,KAAKC,WAAamB,EAIzDhB,YAAY0C,GACV9C,KAAKQ,MAAQX,KAAKY,QAClBT,KAAKU,QAAUb,KAAKa,QAAQV,KAAKQ,MAAM,CAACG,MAAMX,KAAKG,MAAMQ,cACnDX,KAAKU,QAAQE,KAAKkC,GAG1B1C,sBAAsB0C,EAAIC,EAAOC,EAAQ,eACvC,UACQhD,KAAKG,MAAMQ,MAAMmC,EAAI,CACxBG,OAAQ,MACNC,KAAMH,EACTI,QAAS,CAACC,eAAgBJ,KAE5B,MAAOK,GACN,MAAMA,GAIXjD,aAAa0C,EAAI1B,GACf,IACE,aAAapB,KAAKG,MAAMQ,MAAMmC,EAAI,CAChCG,OAAQ,QACRE,QAAS,CAAEC,eAAgB,6BAC3BF,KAAM9B,IAER,MAAOiC,GACN,MAAMA,GAOZnD,eACC,IAAIoD,EAAU,CACdC,IAAK,iCACLC,IAAK,gCACLC,IAAK,sCACLC,QAAS,8CACTC,GAAI,mCACJC,IAAK,4BACLC,KAAM,gCACNC,KAAM,6BACNC,KAAM,mCACNC,MAAO,oCACPC,OAAQ,yCACRC,IAAK,4BACLC,KAAM,mCACNC,MAAO,kDACPC,IAAK,sCACLC,MAAO,+CACPC,QAAS,oCACTC,GAAI,+BACJC,IAAK,iCACLC,IAAK,gCACLC,MAAO,kCACPC,GAAI,0CACJC,KAAM,iCACNC,IAAK,8CACLC,KAAM,wCACNC,IAAK,2BACLC,MAAO,qCACPC,OAAQ,qBACRC,KAAM,2BACNC,MAAO,oCACPC,MAAO,kCACPC,KAAM,mCACNC,IAAK,mCACLC,OAAQ,mCACRC,GAAI,2BACJC,MAAO,mCACPC,GAAI,qCACJC,IAAK,qCAEDC,EAAU,GACd,IAAI,IAAIC,KAAKxC,EACXuC,aAAgCC,OAAOxC,EAAQwC,QAEjD,OAAOD,kCC5JTlI,EAAAgB,EAAAoH,GAAA,SAAA3I,GAAA,IAAA4I,EAAArI,EAAA,GAAAsI,EAAAtI,EAAA2B,EAAA0G,GAEmB,oBAATxI,SAAuBJ,EAAOD,QAAU+I,KAEnCA,YAAf,qCCJA9I,EAAAD,QAAA,SAAAgJ,GACA,IAAAA,EAAAC,gBAAA,CACA,IAAAhJ,EAAAmB,OAAAY,OAAAgH,GAEA/I,EAAAiJ,WAAAjJ,EAAAiJ,SAAA,IACA9H,OAAAC,eAAApB,EAAA,UACAqB,YAAA,EACAC,IAAA,WACA,OAAAtB,EAAAU,KAGAS,OAAAC,eAAApB,EAAA,MACAqB,YAAA,EACAC,IAAA,WACA,OAAAtB,EAAAS,KAGAU,OAAAC,eAAApB,EAAA,WACAqB,YAAA,IAEArB,EAAAgJ,gBAAA,EAEA,OAAAhJ,kBCtBAA,EAAAD,QAAAM","file":"rdf-easy.bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"rdflib\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"rdflib\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"RDFeasy\"] = factory(require(\"rdflib\"));\n\telse\n\t\troot[\"RDFeasy\"] = factory(root[\"$rdf\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__3__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","if(typeof window===\"undefined\") $rdf = require('rdflib')\n\nclass RDFeasy {\n\n  constructor(auth){\n    this._prefixStr = this._getPrefixes()\n    this._auth = auth\n  }\n\n  async _multiQuery(sources,query){\n    this.store = $rdf.graph()\n    this.fetcher = $rdf.fetcher(this.store,{fetch:this._auth.fetch})\n    for(var source of sources){\n      await this.fetcher.load(source)\n    }\n    return await this.query(null,query)\n  }\n\n  async query(dataUrl,sparqlStr){\n    sparqlStr = this._prepSparql(dataUrl,sparqlStr)\n    if(Array.isArray(dataUrl)) { \n      return await this._multiQuery(dataUrl,sparqlStr) \n    }\n    return await this._runQuery( dataUrl, sparqlStr, \"array\" )\n  }\n  async value(source,sparql){\n    sparql = this._prepSparql(source,sparql)\n    return await this._runQuery( source, sparql, \"value\" )\n  }\n\n  async _runQuery(dataUrl,sparqlStr,outputFormat){\n    if(dataUrl) await this._load(dataUrl)\n    let results = await this._execute(sparqlStr)\n    if(outputFormat.match(/array/i)){ return results }\n    else if(outputFormat.match(/value/i)) {\n       if(!results || results.length < 1) return \"\"\n       let key = ( Object.keys(results[0])[0]  )\n       return( results[0][key] )\n    }\n  }\n\n  async _execute(sparql){ \n    let self = this\n    return new Promise(async(resolve, reject)=>{\n    let preparedQuery = $rdf.SPARQLToQuery(sparql,false,self.store)\n    let wanted = preparedQuery.vars\n    let resultAry = []\n    self.store.query(preparedQuery, async(results) =>  {\n      if(typeof(results)===\"undefined\") { reject(\"No results.\") }\n      let row = await this._rowHandler(wanted,results) \n      if(row) resultAry.push(row)\n    }, {} , function(){return resolve(resultAry)} )\n  })\n}\n\n  async _rowHandler(wanted,results){\n    let row = {}\n    for(var r in results){\n      let found = false\n      let got = r.replace(/^\\?/,'')\n      if(wanted.length){\n        for(var w in wanted){\n          if(got===wanted[w].label){ found=true; continue }\n        }\n        if(!found) continue\n      } \n      row[got]=results[r].value\n    }\n    return(row)\n  }\n\n  _prepSparql(source,sparql){\n    if(!sparql) sparql = \"SELECT * WHERE {?subject ?predicate ?object.}\"\n    sparql=sparql.replace(/\\<\\>/,\"<\"+source+\">\")\n    sparql = `PREFIX : <${source}#>\\n` + this._prefixStr + sparql\n    return sparql\n  }\n\n  async _load(url){\n    this.store = $rdf.graph()\n    this.fetcher = $rdf.fetcher(this.store,{fetch:this._auth.fetch})\n    await this.fetcher.load(url)\n  }\n\n  async createOrReplace(url,turtle,rdfType=\"text/turtle\"){\n    try {\n      await this._auth.fetch(url,{\n         method: \"PUT\",\n           body: turtle,\n        headers: {\"Content-Type\": rdfType}\n      })\n    } catch (err) {\n       throw err\n    }\n  }\n\n  async update(url,sparql){\n    try {\n      return await this._auth.fetch(url,{\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/sparql-update' },\n        body: sparql\n      })\n    } catch (err) {\n       throw err\n    }\n  }\n\n /**\n  *  lifted from solid-namespace package\n  */\n _getPrefixes(){\n  let aliases = {\n  acl: 'http://www.w3.org/ns/auth/acl#',\n  arg: 'http://www.w3.org/ns/pim/arg#',\n  cal: 'http://www.w3.org/2002/12/cal/ical#',\n  contact: 'http://www.w3.org/2000/10/swap/pim/contact#',\n  dc: 'http://purl.org/dc/elements/1.1/',\n  dct: 'http://purl.org/dc/terms/',\n  doap: 'http://usefulinc.com/ns/doap#',\n  foaf: 'http://xmlns.com/foaf/0.1/',\n  http: 'http://www.w3.org/2007/ont/http#',\n  httph: 'http://www.w3.org/2007/ont/httph#',\n  icalTZ: 'http://www.w3.org/2002/12/cal/icaltzd#', // Beware: not cal:\n  ldp: 'http://www.w3.org/ns/ldp#',\n  link: 'http://www.w3.org/2007/ont/link#',\n  linkr: 'http://www.iana.org/assignments/link-relations/',\n  log: 'http://www.w3.org/2000/10/swap/log#',\n  media: 'http://www.iana.org/assignments/media-types/',\n  meeting: 'http://www.w3.org/ns/pim/meeting#',\n  mo: 'http://purl.org/ontology/mo/',\n  owl: 'http://www.w3.org/2002/07/owl#',\n  pad: 'http://www.w3.org/ns/pim/pad#',\n  patch: 'http://www.w3.org/ns/pim/patch#',\n  qu: 'http://www.w3.org/2000/10/swap/pim/qif#',\n  trip: 'http://www.w3.org/ns/pim/trip#',\n  rdf: 'http://www.w3.org/1999/02/22-rdf-syntax-ns#',\n  rdfs: 'http://www.w3.org/2000/01/rdf-schema#',\n  rss: 'http://purl.org/rss/1.0/',\n  sched: 'http://www.w3.org/ns/pim/schedule#',\n  schema: 'http://schema.org/', // @@ beware confusion with documents no 303\n  sioc: 'http://rdfs.org/sioc/ns#',\n  solid: 'http://www.w3.org/ns/solid/terms#',\n  space: 'http://www.w3.org/ns/pim/space#',\n  stat: 'http://www.w3.org/ns/posix/stat#',\n  tab: 'http://www.w3.org/2007/ont/link#',\n  tabont: 'http://www.w3.org/2007/ont/link#',\n  ui: 'http://www.w3.org/ns/ui#',\n  vcard: 'http://www.w3.org/2006/vcard/ns#',\n  wf: 'http://www.w3.org/2005/01/wf/flow#',\n  xsd: 'http://www.w3.org/2001/XMLSchema#',\n}\n  let prefixStr=\"\"\n  for(var a in aliases){\n    prefixStr = prefixStr+`PREFIX ${a}: <${aliases[a]}>\\n`\n  }\n  return prefixStr\n}\n\n}\n\nmodule.exports = exports = RDFeasy\n","import RDFeasy from './rdflib-easy.js'\n\nif(typeof window==='undefined')  module.exports = RDFeasy\n\nexport default RDFeasy\n","module.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","module.exports = __WEBPACK_EXTERNAL_MODULE__3__;"],"sourceRoot":""}